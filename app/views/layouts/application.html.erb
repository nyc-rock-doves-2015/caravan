<!DOCTYPE html>
<html>
<head>
  <title>Caravan</title>
  <%= stylesheet_link_tag    'application', media: 'all' %>
  <%= javascript_include_tag 'application' %>
  <%= javascript_include_tag "//maps.google.com/maps/api/js?v=3.13&sensor=false&libraries=places" %>
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  <%= csrf_meta_tags %>
</head>
<!-- Navigation -->
<nav class="navbar navbar-custom navbar-top top-nav-collapse" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-main-collapse">
        <i class="fa fa-bars"></i>
      </button>
      <a class="navbar-brand page-scroll" href="/">
        <!-- <i class="fa fa-play-circle"></i> -->Caravan
      </a>
    </div>
    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse navbar-right navbar-main-collapse">
      <ul class="nav navbar-nav">
        <% if current_user %>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><%= current_user.username.capitalize %> <span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li><a href="/profile">My profile</a></li>
            <li><a href="<%= inbox_path %>"> My Inbox</a></li>
            <li class="divider"></li>
            <li><a href="/trips/new">New Trip</a></li>
            <li><a href="#" data-toggle="modal" data-target="#myModalNorm">New Parcel</a></li>
            <li><a href="/trips/search"> New Search</a></li>

            <li class="divider"></li>
            <li><a href="<%= signout_path %>">Sign out</a></li>
          </ul>
        </li>
        <% else %>
        <li>
          <a href="#signup" data-toggle="modal" data-target=".bs-modal-sm">Sign In</a>
        </li>
        <% end %>
      </ul>
    </div>
  </div>
</nav>
<!-- Parcel Modal -->
<div class="modal fade" id="myModalNorm" tabindex="-1" role="dialog"
aria-labelledby="myModalLabel" aria-hidden="true">
<div class="modal-dialog">
  <div class="modal-content">
    <!-- Modal Header -->
    <div class="modal-header">
      <button type="button" class="close"
      data-dismiss="modal">
      <span aria-hidden="true">&times;</span>
      <span class="sr-only">Close</span>
    </button>
    <h4 class="modal-title" id="myModalLabel">
      Modal title
    </h4>
  </div>

  <!-- Modal Body -->
  <div class="modal-body">
   <div class="container">
    <%# render partial: "layouts/stepwizard" %>
    <%= form_tag (parcels_path), method: :post, multipart: true, id: "creation-form" do %>
    <div class="row " id="step-1">
      <div class="col-xs-12">
        <div class="col-md-12">
          <h3> Step 1: Origin </h3>
          <%= render partial: 'addresses/new_origin' %>
        </div>
      </div>
    </div>
    <div class="row " id="step-2">
      <div class="col-xs-12">
        <div class="col-md-12">
          <h3> Step 2: Destination </h3>
          <%= render partial: 'addresses/new_destination' %>
        </div>
      </div>
    </div>
    <div class="row " id="step-3">
      <div class="col-xs-12">
        <div class="col-md-12">
          <h3> Step 3: Parcel Info<h3>
            <div class="form-group">
              <%= hidden_field_tag 'parcel[delivered]', false %>
              <%= text_field_tag 'parcel[description]', @parcel ? @parcel.description : "", placeholder: "Parcel Description" %>
            </div>
            <div class="form-group">
              <div class='input-group date'>
                <%= text_field_tag 'parcel[pickup_by]', @parcel ? @parcel.pickup_by : "", placeholder: "Pickup By", :id => "datetimepicker1" %>
              </div>
            </div>
            <div class="form-group">
              <div class='input-group date'>
                <%= text_field_tag 'parcel[deliver_by]', @parcel ? @parcel.deliver_by: "", placeholder: "Delivery By", :id => 'datetimepicker2' %>
              </div>
            </div>
            <div class="form-group">
              <%= text_field_tag 'parcel[volume]', @parcel ? @parcel.volume : "", placeholder: "Volume" %>
            </div>
            <div class="form-group">
              <%= text_field_tag 'parcel[weight]', @parcel ? @parcel.weight : "", placeholder: "Weight" %>
            </div>
            <div class="form-group">
              <%= text_field_tag 'parcel[delivery_notes]', @parcel ? @parcel.delivery_notes : "", placeholder: "Delivery Notes" %>
            </div>
            <%= hidden_field_tag 'parcel[trip_id]', @trip_id %>
          </div>
        </div>
      </div>


    </div>
  </div>

  <!-- Modal Footer -->
  <div class="modal-footer">
    <button type="button" class="btn btn-default"
    data-dismiss="modal">
    Close
  </button>
  <%= submit_tag (@submit_btn), id: "button-3", class: "btn btn-default nextBtn"%>
  <% end %>
</div>
</div>
</div>
</div>
<!-- Modal -->
<div class="modal fade bs-modal-sm" id="myModal" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <br>
      <div class="bs-example bs-example-tabs">
        <ul id="myTab" class="nav nav-tabs">
          <li class="active"><a href="#signin" data-toggle="tab">Sign In</a></li>
          <li class=""><a href="#signup" data-toggle="tab">Register</a></li>
          <!--    <li class=""><a href="#why" data-toggle="tab">Why?</a></li> -->
        </ul>
      </div>
      <div class="modal-body">
        <div id="myTabContent" class="tab-content">
          <div class="tab-pane fade active in" id="signin">
            <fieldset>
              <div class="control-group">
                <label class="control-label" for="userid">Alias:</label>
                <div class="controls">
                  <%= form_for :user, url: signin_path, :html => {:class => "form-horizontal"} do |f| %>
                  <%= f.text_field :username, :class => 'input-medium form-control', :placeholder => 'Username', :id =>"username"  %>
                </div>
              </div>

              <!-- Password input-->
              <div class="control-group">
                <label class="control-label" for="passwordinput">Password:</label>
                <div class="controls">
                  <%= f.password_field :password, :class => 'input-medium form-control', :placeholder => '********' %>
                </div>
              </div>
              <!-- Button -->
              <div class="control-group">
                <label class="control-label" for="signin"></label>
                <div class="controls">
                  <%= f.submit 'Login', :class => 'btn btn-success', :id => 'signin' %>
                </div>
              </div>
            </fieldset>
            <% end %>
          </div>


          <div class="tab-pane fade" id="signup">
            <fieldset>

              <!-- Text input-->
              <div class="control-group">
                <label class="control-label" for="userid">Alias:</label>
                <div class="controls">
                  <%= form_for :user, url: users_path do |f| %>
                  <%= f.text_field :username, :class => 'input-medium form-control', :placeholder => 'Username', :id =>"username"  %>
                </div>
              </div>

              <!-- Password input-->
              <div class="control-group">
                <label class="control-label" for="password">Password:</label>
                <div class="controls">
                  <%= f.password_field :password, :class => 'input-medium form-control', :placeholder => '********' %>
                </div>
              </div>

              <!-- Button -->
              <div class="control-group">
                <label class="control-label" for="confirmsignup"></label>
                <div class="controls">
                  <%= f.submit 'Sign Up', :class => 'btn btn-success', :id => 'signin' %>
                </div>
              </div>
            </fieldset>
            <% end %>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <center>
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </center>
      </div>
    </div>
  </div>
</div>

<div class="main container">
  <%= yield %>
</div>